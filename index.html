<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Love Calculator ‚ù§Ô∏è</title>
    <meta name="description" content="A fun, elegant love compatibility calculator. Enter two names to get a score, message, and confetti!" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>‚ù§Ô∏è</text></svg>">
    <style>
         :root {
            --bg: radial-gradient(1200px 800px at 10% 10%, #ff9ecf 0%, transparent 60%), radial-gradient(1000px 700px at 90% 20%, #ffd1a1 0%, transparent 60%), radial-gradient(1000px 700px at 50% 100%, #baffc9 0%, transparent 60%), linear-gradient(160deg, #0f0f1b, #1b0f16 70%);
            --card: rgba(255, 255, 255, 0.12);
            --card-2: rgba(255, 255, 255, 0.18);
            --border: rgba(255, 255, 255, 0.2);
            --text: #ffffff;
            --muted: #e9e9f2;
            --accent: #ff4d6d;
            --accent-2: #ff8fab;
            --ok: #34d399;
            --warn: #f59e0b;
            --bad: #ef4444;
        }
        
        * {
            box-sizing: border-box;
        }
        
        html,
        body {
            height: 100%;
        }
        
        body {
            margin: 0;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji';
            color: var(--text);
            background: var(--bg);
            display: grid;
            place-items: center;
            overflow-x: hidden;
        }
        
        .app {
            width: min(950px, 92vw);
            padding: 28px;
            border-radius: 28px;
            background: linear-gradient(180deg, var(--card-2), var(--card));
            border: 1px solid var(--border);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.35), inset 0 1px 0 rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(10px);
        }
        
        header {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 18px;
        }
        
        .logo {
            font-size: 32px;
        }
        
        .title {
            font-weight: 800;
            font-size: clamp(20px, 4vw, 34px);
            letter-spacing: .3px;
        }
        
        .sub {
            color: var(--muted);
            opacity: .9;
            font-size: 14px;
        }
        
        .row {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }
        
        @media (min-width: 780px) {
            .row {
                grid-template-columns: 1fr auto 1fr;
                align-items: end;
            }
        }
        
        label {
            display: block;
            font-size: 12px;
            letter-spacing: .4px;
            text-transform: uppercase;
            color: var(--muted);
            margin-bottom: 6px;
        }
        
        .field {
            position: relative;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 16px 18px;
            border-radius: 16px;
            border: 1px solid var(--border);
            background: rgba(255, 255, 255, 0.08);
            color: var(--text);
            font-size: 16px;
            outline: none;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }
        
        input::placeholder {
            color: #eaeaf7aa;
        }
        
        .and {
            display: none;
        }
        
        @media (min-width: 780px) {
            .and {
                display: flex;
                align-items: center;
                justify-content: center;
                height: 100%;
                opacity: .8;
                font-weight: 700;
            }
            .and span {
                background: rgba(255, 255, 255, 0.08);
                border: 1px solid var(--border);
                padding: 8px 14px;
                border-radius: 999px;
            }
        }
        
        .actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 14px;
        }
        
        button {
            border: 1px solid var(--border);
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
            padding: 12px 16px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: transform .08s ease, background .2s ease, box-shadow .2s ease;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        
        button:hover {
            transform: translateY(-1px);
        }
        
        .primary {
            background: linear-gradient(180deg, var(--accent-2), var(--accent));
        }
        
        .ghost {
            background: rgba(255, 255, 255, 0.06);
        }
        
        .muted {
            opacity: .8;
        }
        
        .result-card {
            margin-top: 22px;
            padding: 18px;
            border-radius: 22px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--border);
        }
        
        .result-inner {
            display: grid;
            grid-template-columns: 1fr;
            gap: 18px;
            align-items: center;
        }
        
        @media (min-width: 780px) {
            .result-inner {
                grid-template-columns: 260px 1fr;
            }
        }
        
        .gauge {
            width: 210px;
            height: 210px;
            margin: 0 auto;
            position: relative;
            display: grid;
            place-items: center;
            border-radius: 50%;
            background: conic-gradient(var(--accent) calc(var(--pct) * 1%), rgba(255, 255, 255, 0.12) 0);
            box-shadow: inset 0 0 0 12px rgba(255, 255, 255, 0.06), 0 8px 30px rgba(0, 0, 0, 0.3);
        }
        
        .gauge::after {
            content: "";
            position: absolute;
            inset: 16px;
            background: rgba(0, 0, 0, 0.25);
            border-radius: 50%;
            border: 1px solid var(--border);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.06);
        }
        
        .gauge-val {
            position: relative;
            font-weight: 900;
            font-size: 46px;
            letter-spacing: .6px;
            text-shadow: 0 1px 0 rgba(0, 0, 0, 0.4);
        }
        
        .gauge-caption {
            position: relative;
            margin-top: -8px;
            font-size: 13px;
            color: var(--muted);
        }
        
        .names {
            font-size: clamp(16px, 2.6vw, 22px);
            font-weight: 800;
            text-align: center;
        }
        
        .msg {
            font-size: 16px;
            color: var(--muted);
            line-height: 1.5;
        }
        
        .chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 6px;
        }
        
        .chip {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--border);
            padding: 6px 10px;
            border-radius: 999px;
            font-size: 12px;
        }
        
        .history {
            margin-top: 18px;
        }
        
        .history h3 {
            margin: 0 0 8px 0;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: .4px;
            color: var(--muted);
        }
        
        .history-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }
        
        @media (min-width:700px) {
            .history-list {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid var(--border);
            padding: 12px 14px;
            border-radius: 14px;
        }
        
        .item strong {
            font-weight: 800;
        }
        
        .hearts {
            position: fixed;
            inset: 0;
            pointer-events: none;
            overflow: hidden;
            z-index: 1;
        }
        
        .heart {
            position: absolute;
            font-size: 18px;
            animation: floatUp 3.8s ease-in forwards;
            opacity: .9;
            filter: drop-shadow(0 3px 8px rgba(0, 0, 0, .4));
        }
        
        @keyframes floatUp {
            0% {
                transform: translateY(0) translateX(0) scale(1);
                opacity: .0;
            }
            10% {
                opacity: 1;
            }
            100% {
                transform: translateY(-120vh) translateX(var(--x, 0)) scale(1.15);
                opacity: 0;
            }
        }
        
        .footer {
            margin-top: 10px;
            font-size: 12px;
            color: var(--muted);
            text-align: center;
        }
        
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>

<body>
    <div class="hearts" id="hearts"></div>
    <main class="app" role="main">
        <header>
            <div class="logo" aria-hidden="true">üíò</div>
            <div>
                <div class="title">Love Calculator</div>
                <div class="sub">Fun & deterministic scores ‚Äî the same names always give the same result.</div>
            </div>
        </header>

        <form id="form" autocomplete="off">
            <div class="row">
                <div class="field">
                    <label for="name1">Your Name</label>
                    <input id="name1" name="name1" type="text" placeholder="e.g., Pavan" required />
                </div>
                <div class="and"><span>Ôºã</span></div>
                <div class="field">
                    <label for="name2">Partner's Name</label>
                    <input id="name2" name="name2" type="text" placeholder="e.g., Priya" required />
                </div>
            </div>

            <div class="actions">
                <button class="primary" id="calcBtn" type="submit">Calculate ‚ù§Ô∏è</button>
                <button class="ghost" id="swapBtn" type="button" aria-label="Swap names">Swap ‚ÜîÔ∏è</button>
                <button class="ghost muted" id="resetBtn" type="button">Reset</button>
                <button class="ghost" id="shareBtn" type="button">Share</button>
            </div>
        </form>

        <section class="result-card" id="resultCard" hidden>
            <div class="result-inner">
                <div class="gauge" id="gauge" style="--pct: 0">
                    <div class="gauge-val" id="score">0%</div>
                    <div class="gauge-caption">Compatibility</div>
                </div>
                <div>
                    <div class="names" id="pair">‚Äî</div>
                    <p class="msg" id="message">Enter names to see your love score!</p>
                    <div class="chips" id="tags"></div>
                </div>
            </div>

            <div class="history" id="history">
                <h3>History (device)</h3>
                <div class="history-list" id="historyList"></div>
            </div>
        </section>

        <p class="footer">Built for fun. Be kind, communicate, and trust your heart. üíû</p>
    </main>

    <script>
        const $ = (q) => document.querySelector(q);
        const $$ = (q) => Array.from(document.querySelectorAll(q));

        const form = $('#form');
        const name1 = $('#name1');
        const name2 = $('#name2');
        const resultCard = $('#resultCard');
        const gauge = $('#gauge');
        const scoreEl = $('#score');
        const pairEl = $('#pair');
        const msgEl = $('#message');
        const tagsEl = $('#tags');
        const historyList = $('#historyList');
        const heartsLayer = $('#hearts');

        function normalize(s) {
            return (s || '').toLowerCase().replace(/\s+/g, '').replace(/[^a-z\u0900-\u097F\u0C00-\u0C7F]/g, '');
        }

        function seededScore(a, b) {
            const s = normalize(a) + 'üíó' + normalize(b);
            let h = 2166136261 >>> 0; // FNV-1a
            for (let i = 0; i < s.length; i++) {
                h ^= s.charCodeAt(i);
                h = Math.imul(h, 16777619) >>> 0;
            }
            const pct = h % 101; // 0..100
            return pct;
        }

        function tier(p) {
            if (p >= 86) return {
                label: 'Soulmates',
                color: 'var(--ok)',
                tips: ['Natural chemistry', 'Shared dreams', 'Protect this bond']
            };
            if (p >= 71) return {
                label: 'Great Match',
                color: 'var(--ok)',
                tips: ['Strong trust', 'Playful energy', 'Keep communicating']
            };
            if (p >= 56) return {
                label: 'Promising',
                color: 'var(--warn)',
                tips: ['Invest time', 'Learn love-languages', 'Plan mini dates']
            };
            if (p >= 41) return {
                label: 'Could Work',
                color: 'var(--warn)',
                tips: ['Set expectations', 'Be patient', 'Find common hobbies']
            };
            if (p >= 21) return {
                label: 'It\'s Tricky',
                color: 'var(--bad)',
                tips: ['Honest talks', 'Respect differences', 'Take it slow']
            };
            return {
                label: 'Probably Friends',
                color: 'var(--bad)',
                tips: ['Enjoy the friendship', 'Don\'t force it', 'Focus on growth']
            };
        }

        function validate(a, b) {
            const A = a.trim();
            const B = b.trim();
            if (!A || !B) return 'Please enter both names.';
            if (A.length < 2 || B.length < 2) return 'Names should be at least 2 characters.';
            if (normalize(A) === normalize(B)) return 'Enter two different names for a fair score.';
            return '';
        }

        function animateGauge(to) {
            const from = parseInt(scoreEl.textContent) || 0;
            const start = performance.now();
            const dur = 950;

            function frame(t) {
                const k = Math.min(1, (t - start) / dur);
                const val = Math.round(from + (to - from) * (1 - Math.cos(Math.PI * k)) / 2);
                gauge.style.setProperty('--pct', val);
                scoreEl.textContent = val + '%';
                if (k < 1) requestAnimationFrame(frame);
            }
            requestAnimationFrame(frame);
        }

        function showHearts(count = 24) {
            const w = window.innerWidth;
            for (let i = 0; i < count; i++) {
                const span = document.createElement('span');
                span.className = 'heart';
                span.textContent = ['‚ù§Ô∏è', 'ü•∞', 'üíñ', 'üíò', 'üíù'][Math.floor(Math.random() * 5)];
                const left = Math.random() * w;
                const x = (Math.random() * 120 - 60) + 'px';
                const delay = Math.random() * 0.6;
                const scale = 0.8 + Math.random() * 0.9;
                span.style.left = left + 'px';
                span.style.bottom = '-40px';
                span.style.setProperty('--x', x);
                span.style.animationDelay = delay + 's';
                span.style.transform = `scale(${scale})`;
                heartsLayer.appendChild(span);
                setTimeout(() => span.remove(), 4200);
            }
        }

        function updateHistory(entry) {
            const list = JSON.parse(localStorage.getItem('love_history') || '[]');
            list.unshift(entry);
            localStorage.setItem('love_history', JSON.stringify(list.slice(0, 8)));
            renderHistory();
        }

        function renderHistory() {
            const list = JSON.parse(localStorage.getItem('love_history') || '[]');
            historyList.innerHTML = '';
            for (const it of list) {
                const div = document.createElement('div');
                div.className = 'item';
                div.innerHTML = `<div><strong>${it.a}</strong> + <strong>${it.b}</strong></div><div>${it.p}%</div>`;
                historyList.appendChild(div);
            }
        }

        function buildTags(p) {
            const t = tier(p);
            tagsEl.innerHTML = '';
            const chip1 = document.createElement('span');
            chip1.className = 'chip';
            chip1.textContent = t.label;
            chip1.style.borderColor = t.color;
            tagsEl.appendChild(chip1);
            t.tips.forEach(s => {
                const c = document.createElement('span');
                c.className = 'chip';
                c.textContent = s;
                tagsEl.appendChild(c);
            })
        }

        async function share(a, b, p) {
            const text = `${a} ‚ù§ ${b}: ${p}% compatibility (Love Calculator)`;
            try {
                if (navigator.share) {
                    await navigator.share({
                        title: 'Love Calculator',
                        text
                    });
                } else {
                    await navigator.clipboard.writeText(text);
                    alert('Copied to clipboard!');
                }
            } catch (e) { /* user cancelled */ }
        }

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const a = name1.value;
            const b = name2.value;
            const err = validate(a, b);
            if (err) {
                alert(err);
                return;
            }
            const p = seededScore(a, b);
            pairEl.textContent = `${a.trim()}  ‚ù§  ${b.trim()}`;
            const t = tier(p);
            msgEl.innerHTML = (p >= 71) ?
                `Looking strong! <b>${t.label}</b>. Keep the spark alive with quality time & honest chats.` :
                (p >= 41) ?
                `There\'s potential. <b>${t.label}</b>. Focus on understanding and shared moments.` :
                `Might be best as friends. <b>${t.label}</b>. Be kind and follow your heart.`;
            buildTags(p);
            resultCard.hidden = false;
            animateGauge(p);
            showHearts(26);
            updateHistory({
                a: a.trim(),
                b: b.trim(),
                p
            });
        });

        $('#swapBtn').addEventListener('click', () => {
            const a = name1.value;
            name1.value = name2.value;
            name2.value = a;
            name1.focus();
        });

        $('#resetBtn').addEventListener('click', () => {
            name1.value = '';
            name2.value = '';
            resultCard.hidden = true;
            tagsEl.innerHTML = '';
            scoreEl.textContent = '0%';
            gauge.style.setProperty('--pct', 0);
            msgEl.textContent = 'Enter names to see your love score!';
            name1.focus();
        });

        $('#shareBtn').addEventListener('click', () => {
            if (resultCard.hidden) {
                alert('Calculate a result first!');
                return;
            }
            const a = name1.value.trim();
            const b = name2.value.trim();
            const p = parseInt(scoreEl.textContent);
            share(a, b, p);
        });

        // init
        renderHistory();
        name1.focus();
    </script>
</body>

</html>